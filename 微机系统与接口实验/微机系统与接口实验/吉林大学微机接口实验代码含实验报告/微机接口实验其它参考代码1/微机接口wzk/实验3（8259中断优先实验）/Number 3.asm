CODE SEGMENT
	ASSUME CS:CODE
START:
	MOV AX,0000H
	MOV DS,AX   ;给定初始地址
	MOV DX,0646H
	MOV AL,90H  ;规定B口为输出，这个是控制字
	OUT DX,AL
	MOV DX,0642H
	MOV AL,0FFH   ;在D0-D7输出11111111,让8个灯初始时全亮
	OUT DX,AL
	MOV AX,OFFSET MIR6   ;取中断服务程序的偏移地址，CS与SI确定中断程序地址
	MOV SI,0038H
	MOV [SI],AX
	MOV AX,CS
	MOV SI,003AH
	MOV [SI],AX
	MOV AX,OFFSET MIR7
	MOV SI,003CH
	MOV [SI],AX
	MOV AX,CS
	MOV SI,003EH
	MOV [SI],AX
	CLI
	MOV AL,11H ;ICW1
	OUT 20H,AL
	MOV AL,08H ;ICW2
	OUT 21H,AL
	MOV AL,04H ;ICW3
	OUT 21H,AL
	MOV AL,01H ;ICW4
	OUT 21H,AL
	MOV AL,3FH ;OCW1
	OUT 21H,AL
	STI
A1:
	MOV DX,0642H
	MOV AL,0FFH
	OUT DX,AL
	JMP A1
MIR6:
	MOV DX,0642H
	MOV AL,0F0H
	OUT DX,AL
	MOV AL,20H ;OCW2
	OUT 20H,AL
	MOV CX,0FFFFH
L1: LOOP L1
	MOV CX,0FFFFH
L2: LOOP L2
	MOV CX,0FFFFH
L3: LOOP L3
	MOV CX,0FFFFH
L4: LOOP L4
	MOV CX,0FFFFH
L5: LOOP L5
	MOV CX,0FFFFH
L6: LOOP L6
	MOV CX,0FFFFH
L7: LOOP L7
	MOV CX,0FFFFH
L8: LOOP L8
    IRET
MIR7:
	MOV DX,0642H
	MOV AL,0FH
	OUT DX,AL
	MOV AL,20H ;OCW2
	OUT 20H,AL
	MOV CX,0FFFFH
L9: LOOP L9
	MOV CX,0FFFFH
L10: LOOP L10
	MOV CX,0FFFFH
L11: LOOP L11
	MOV CX,0FFFFH
L12: LOOP L12
	MOV CX,0FFFFH
L13: LOOP L13
	MOV CX,0FFFFH
L14: LOOP L14
	MOV CX,0FFFFH
L15: LOOP L15
	MOV CX,0FFFFH
L16: LOOP L16
IRET
CODE ENDS
END START