DATA SEGMENT
TABL:    ;DUANMA
	DB 3FH
	DB 06H
	DB 5BH
	DB 4FH
	DB 66H
	DB 6DH
	DB 7DH
	DB 07H
	DB 7FH
	DB 6FH
	DB 77H
DATA ENDS
CODE SEGMENT
	ASSUME CS:CODE,DS:DATA
START:
	MOV AX,DATA
	MOV DS,AX
	
	MOV AL,81H       ;8255初始化
	MOV DX,0606H
	OUT DX,AL
	
	
	CALL FUNC1
    ;CALL FUNC2
   	MOV AH,4CH
	INT 21H
FUNC1 PROC
	PUSH AX
	PUSH BX
	PUSH CX
	PUSH DX
	
E1:	MOV BX,0        ;要显示的数字
	MOV AH,0EFH     ; 位选码
	LEA SI,TABL
	
L1:	MOV AL,[BX+SI]  ;B口送数据
	MOV DX,0602H
	OUT DX,AL
	
	MOV AL,AH       ;A口送位选
	MOV DX,0600H
	OUT DX,AL
	
	CALL DELAY1
	
	ROR AH,1
	CMP AH,0BFH
	JNZ L1      ;从右到左显示一位数字
	
	INC BX      ;加一显示
	CMP BX,10
	JNZ L1
	JMP E1
	POP DX
	POP CX
	POP BX
	POP AX
	RET
FUNC1 ENDP
	
FUNC2 PROC
	PUSH BX
	PUSH AX
	PUSH CX
	PUSH DX
	
F1:	MOV BX,1        ;要显示的数据
	MOV AH,0FEH     ;位选码
	LEA SI,TABL  
	
B1:	MOV AL,[BX+SI]   ;B口送数据
	MOV DX,0602H
	OUT DX,AL
	
	MOV AL,AH		;A口送位选码
	MOV DX,0600H
	OUT DX,AL
	
	CALL DELAY2
	
	INC BX		;加一显示
	ROL AH,1
				
	CMP BX,7          
	JNZ B1
	JMP F1
	POP DX
	POP CX
	POP AX
	POP BX
	RET
FUNC2 ENDP
DELAY1 PROC
	PUSH CX
	PUSH DX
	MOV CX,0FFH
CC1:	MOV DX,0FFH
AA1:	DEC DX
	JNZ AA1
	LOOP CC1
	POP DX
	POP CX
	RET	
DELAY1 ENDP
DELAY2 PROC
	PUSH CX
	PUSH DX
	MOV CX,0FH
C1:	MOV DX,0FH
A1:	DEC DX
	JNZ A1
	LOOP C1
	POP DX
	POP CX
	RET	
DELAY2 ENDP	

CODE ENDS
 END START		