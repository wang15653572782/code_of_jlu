PORT_A EQU 0600H
PORT_B EQU 0602H
PORT_C EQU 0604H
PORT_CON EQU 0606H
DATA SEGMENT
	NUMTAB DB  3FH	;0µÄ¶ÎÂë
	       DB  06H	;1
	       DB  5BH	;2
	       DB  4FH	;3
	       DB  66H	;4
	       DB  6DH	;5
	       DB  7DH	;6
	       DB  07H	;7
	       DB  7FH	;8
	       DB  6FH	;9
	       DB  77H	;A
	       DB  7CH  ;B
	       DB  39H	;C
	       DB  5EH	;D
	       DB  79H	;E
	       DB  71H	;F
	TEMP   DB  00H,00H,00H,00H,00H,00H
DATA ENDS
CODE SEGMENT
	ASSUME CS:CODE,DS:DATA
START:
	MOV AX,DATA
    MOV DS,AX
    LEA   SI,NUMTAB
    LEA   DI,TEMP
    
	MOV DX,PORT_CON
	MOV	AL,81H
	OUT DX,AL
	MOV DX,PORT_A
	MOV AL,0DFH
	OUT DX,AL
	MOV DX,PORT_B
	MOV AL,3FH
	OUT DX,AL
	CALL DELAY
L1:
	MOV AH,0FEH
	MOV BX,0
LSCAN:
	MOV DX,PORT_A	
	MOV AL,AH
	OUT DX,AL
	MOV DX,PORT_C
	IN AL,DX
	AND AL,0FH
	CMP AL,0FH
	JNZ HSCAN
	ADD BX,1
	ROL AH,1
	CMP BX,4
	JZ L1
	JMP LSCAN
HSCAN:
	CMP AL,0EH
	JZ L2

L2:
	MOV AL,DS:[DI+BP-1]
	MOV DS:[DI+BP],AL
	DEC BP
	JNZ L2
	MOV AL,DS:[SI+BX]
	MOV DS:[DI+BP],AL
		
SHOW:
		
	
DELAY:
      PUSH CX
      MOV  CX,0FF8H
LLL:  LOOP LLL
      POP  CX
      RET
CODE ENDS
	END START