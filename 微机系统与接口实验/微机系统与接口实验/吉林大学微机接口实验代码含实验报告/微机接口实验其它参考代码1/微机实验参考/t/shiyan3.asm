CODE SEGMENT
ASSUME CS:CODE
MAIN PROC FAR

CLI
MOV AL,13H    ;ICW1
MOV DX,0020H
OUT DX,AL
MOV AL,0EH    ;ICW2
MOV DX,0021H
OUT DX,AL
;MOV AL,0FCH   ;ICW3
;MOV DX,0021H
;OUT DX,AL
MOV AL,07H    ;ICW4
MOV DX,0021H
OUT DX,AL
;MOV AL,3FH    ;OCW1
;MOV DX,0021H
;OUT DX,AL
STI

CLI
MOV AX,0
MOV ES,AX
MOV DI,0038H
MOV AX,OFFSET INT6
CLD
STOSW
MOV AX,SEG INT6
STOSW
STI

CLI
MOV AX,0
MOV ES,AX
MOV DI,003CH
MOV AX,OFFSET INT7
CLD
STOSW
MOV AX,SEG INT7
STOSW
STI

  MOV AL,80H
  MOV DX,0646H
  OUT DX,AL
P:STI
  MOV AL,0FFH
  MOV DX,0642H
  OUT DX,AL 
  JMP P
  MOV AH,4CH
  INT 21H

INT6 PROC FAR
PUSH AX
PUSH DX
MOV AL,0FH
MOV DX,0642H
OUT DX,AL
MOV CX,0FFFFH
X:LOOP X
POP DX
POP AX
IRET
INT6 ENDP

INT7 PROC FAR
PUSH AX
PUSH DX
MOV AL,0F0H
MOV DX,0642H
OUT DX,AL
MOV CX,0FFFFH
Y:  LOOP Y
POP DX
POP AX
IRET
INT7 ENDP

MAIN ENDP
CODE ENDS
    END