

CODE SEGMENT
	ASSUME CS:CODE
START:	MOV DX,0646H
		MOV AL,90H
		OUT DX,AL
	
		
		MOV AX, OFFSET MIR6
		MOV SI ,0038H
		MOV [SI],AX  ;段内偏移
		INC SI
		INC SI
		MOV AX,CS
		MOV [SI], AX
		
		MOV AX ,OFFSET MIR7
		MOV SI,003CH
		MOV [SI],AX
		INC SI
		INC SI
		MOV AX,CS
		MOV [SI],AX
		
		CLI
		MOV AL,11H
		OUT  20H,AL
		MOV AL,08H
		OUT 21H,AL
		MOV AL,04H
		OUT 21H,AL
		MOV AL,05H
		OUT 21H,AL
		MOV AL,3FH
		OUT 21H,AL
		STI
AA1: 
    MOV DX, 0642H;主程序
   
    OUT DX, AL
    JMP AA1		
		
MIR6:  ;绿灯亮

	STI
	MOV AH,80H
L2: ADD AL,AL
	MOV DX,0642H
	OUT DX,AL
	MOV CX,0FFFFH
L3:
	LOOP L3
	MOV CX,0FFFFH
L4:
	LOOP L4
	MOV CX,0FFFFH
L6:
	LOOP L6
	CMP AH,AL
	JNS L2



	


MOV AL, 20H    ;命令字OCW2，20H=00100000B，表示结束中断
    OUT 20H, AL    ;写入OCW2，结束中断 
   
    IRET
    ;中断返回指令，回到主程序发生中断的位置
MIR7: ;红灯亮 
STI
 	MOV AH,01H
L8: ADD AL,AL
	MOV DX,0642H
	OUT DX,AL
	MOV CX,0FFFFH
L1:
	LOOP L1
	MOV CX,0FFFFH
L5:
	LOOP L5
	MOV CX,0FFFFH
L7:
	LOOP L7
	CMP AH,AL
	JNS L8
    MOV AL,20H
    OUT 20H,AL
    IRET
		
		
		
		
CODE ENDS
	END START