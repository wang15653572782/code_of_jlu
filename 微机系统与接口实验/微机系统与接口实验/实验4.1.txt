A8255 EQU 0600H
B8255 EQU 0602H
C8255 EQU 0604H

CON8255	EQU 0606H
A0809	EQU 0640H
B0809	EQU	0642H

CODE SEGMENT
	ASSUME CS:CODE
	
START:
	MOV DX,CON8255
	MOV AL,90H;A输入，B输出
	OUT DX,AL

A1:
	MOV DX,B0809
	MOV AL,00H
	OUT DX,AL;启动通道0
	
	MOV DX,A0809;启动A/D采样
	OUT DX,AL
	
	CALL DELAY
	IN AL,DX;读A/D采样结果
	
	MOV DX,B8255
	OUT DX,AL;
	JMP A1
	
DELAY PROC NEAR
 	MOV CX,0FFFFH
 	LOOP $
 	RET
DELAY ENDP
	
CODE ENDS
END START