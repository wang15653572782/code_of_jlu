A8255 EQU 0600H
B8255 EQU 0602H
C8255 EQU 0604H
CON8255 EQU 0606H

A0809 EQU 0640H
B0809 EQU 0642H

CODE SEGMENT
	ASSUME CS:CODE
START:
	MOV DX,CON8255
	MOV AL,90H
	OUT DX,AL
	
X3:
	MOV DX,B0809
	MOV AL,01H
	OUT DX,AL
	MOV DX,A0809
	OUT DX,AL
	
X1:
	MOV DX,A8255
	IN AL,DX
	TEST AL,80H
	JNZ X1
	
X2:
	MOV DX,A8255
	IN AL,DX
	TEST AL,80H
	JZ X2
	
	MOV DX,A0809
	IN AL,DX
	MOV DX,B8255
	OUT DX,AL
	JMP X3
	
CODE ENDS
	END START